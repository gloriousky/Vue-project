import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";import{o as c,c as i,a as t,F as p,i as _,t as e,d as h}from"./vendor.edb13cca.js";const g={name:"product",data(){return{url:"https://vue3-course-api.hexschool.io/v2",apiPath:"david-hexschool",productsList:[],productInfo:{title:"",imageUrl:"",imagesUrl:[],category:"",description:"",price:0,origin_price:0,unit:""}}},created(){},mounted(){this.checkLogin()},methods:{login(){const o=this.emailValue,r=this.passwordValue,a={username:o,password:r};this.axios.post(`${this.url}/admin/signin`,a).then(d=>{console.log(d);const{token:s,expired:l}=d.data;document.cookie=`hexToken=${s};expires=${new Date(l)}`}).catch(d=>{console.dir(d)})},checkLogin(){console.log("checkLogin");const o=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=o,this.axios.post(`${this.url}/api/user/check`).then(r=>{console.log(r),this.getProducts()}).catch(r=>{console.log(r),this.$swal("\u72C0\u614B\u7570\u5E38"),this.$router.push("/week2/login")})},getProducts(){this.axios.get(`${this.url}/api/${this.apiPath}/admin/products`).then(o=>{console.log(o),this.productsList=o.data.products,console.log(this.productsList)}).catch(o=>{console.log(o)})},getProductInfo(o){this.productInfo.title=o.title,this.productInfo.imageUrl=o.imageUrl,this.productInfo.category=o.category,this.productInfo.description=o.description,this.productInfo.content=o.content,this.productInfo.price=o.price,this.productInfo.origin_price=o.origin_price,this.productInfo.unit=o.unit,this.productInfo.imagesUrl=o.imagesUrl},addProducts(){this.axios.post(`${this.url}/api/${this.apiPath}/admin/product`,product).then(o=>{console.log(o)}).catch(o=>{console.log(o)})},delProducts(){this.axios.delete(`${this.url}/api/${this.apiPath}/admin/product/-Mts0xvpeSWRVjuKsgoU`).then(o=>{console.log(o)}).catch(o=>{console.log(o)})}}},m={class:"flex flex-col items-center mx-auto"},f={class:""},x={class:"col-md-6"},I=t("h2",null,"\u7522\u54C1\u5217\u8868",-1),k={class:"border-4 border-gray-800 bg-white"},w=t("thead",{class:"border-b-4 border-gray-800"},[t("tr",null,[t("th",{width:"150"},"\u7522\u54C1\u540D\u7A31"),t("th",{width:"120"},"\u539F\u50F9"),t("th",{width:"120"},"\u552E\u50F9"),t("th",{width:"150"},"\u662F\u5426\u555F\u7528"),t("th",{width:"120"},"\u67E5\u770B\u7D30\u7BC0")])],-1),b={width:"150"},y={width:"120"},P={width:"120"},L={width:"150"},U={key:0,class:"text-green-600"},$={key:1},V={width:"120"},j=["onClick"],B={class:"text-xl"},T=h(" \u76EE\u524D\u6709 "),v={class:"text-red-500"},C=h(" \u9805\u7522\u54C1 "),D={class:""},F=t("h2",null,"\u55AE\u4E00\u7522\u54C1\u7D30\u7BC0",-1),N={class:""},S=["src"],z={class:""},A={class:""},E={class:""},K={class:""},M={class:""},R={class:"flex justify-center items-center"},W={class:"mx-2 text-xl text-red-500"},q={class:""},G=["src"],H={key:1,class:""};function J(o,r,a,d,s,l){return c(),i("div",m,[t("div",f,[t("div",x,[I,t("table",k,[w,t("tbody",null,[(c(!0),i(p,null,_(s.productsList,n=>(c(),i("tr",{key:n.id,class:"border-b border-gray-400"},[t("td",b,e(n.title),1),t("td",y,e(n.origin_price),1),t("td",P,e(n.price),1),t("td",L,[n.is_enabled?(c(),i("span",U,"\u555F\u7528")):(c(),i("span",$,"\u672A\u555F\u7528"))]),t("td",V,[t("button",{onClick:O=>l.getProductInfo(n),type:"button",class:"text-blue-500"}," \u67E5\u770B\u7D30\u7BC0 ",8,j)])]))),128))])]),t("p",B,[T,t("span",v,e(s.productsList.length),1),C])]),t("div",D,[F,s.productInfo.title?(c(),i(p,{key:0},[t("div",N,[t("img",{src:s.productInfo.imageUrl,class:"w-80 mx-auto",alt:"\u4E3B\u5716"},null,8,S),t("div",z,[t("h5",A,[h(e(s.productInfo.title)+" ",1),t("span",E,e(s.productInfo.category),1)]),t("p",K,"\u5546\u54C1\u63CF\u8FF0\uFF1A"+e(s.productInfo.description),1),t("p",M,"\u5546\u54C1\u5167\u5BB9\uFF1A"+e(s.productInfo.content),1),t("div",R,[t("p",W," \u7279\u50F9:"+e(s.productInfo.price)+"\u5143 ",1),t("p",q,[t("del",null,e(s.productInfo.origin_price),1)]),h(" "+e(s.productInfo.unit)+" / \u5143 ",1)])])]),(c(!0),i(p,null,_(s.productInfo.imagesUrl,n=>(c(),i("img",{src:n,alt:"",class:"w-60 flex mx-auto"},null,8,G))),256))],64)):(c(),i("p",H,"\u8ACB\u9078\u64C7\u4E00\u500B\u5546\u54C1\u67E5\u770B"))])])])}var Y=u(g,[["render",J]]);export{Y as default};
